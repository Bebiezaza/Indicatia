plugins {
    id "fabric-loom" version "0.2.5-SNAPSHOT"
    id "maven-publish"
    id "com.matthewprenger.cursegradle" version "1.4.0"
}

def mcVersion = project.mc_version
def version = project.version

apply plugin: net.fabricmc.loom.LoomGradlePlugin
archivesBaseName = "Indicatia-" + mcVersion
sourceCompatibility = targetCompatibility = 1.8

minecraft {
    refmapName = "indicatia-refmap.json"
}

repositories {
    maven {
        url "https://plugins.gradle.org/m2/"
    }
    maven {
        url "https://minecraft.curseforge.com/api/maven"
    }
    maven {
        url "http://server.bbkr.space:8081/artifactory/libs-snapshot"
    }
    maven {
        url "https://jitpack.io"
    }
    flatDir { dir "libs" }
}

dependencies {
    minecraft "com.mojang:minecraft:19w37a"
    mappings "net.fabricmc:yarn:19w37a+build.+"
    modApi "net.fabricmc:fabric-loader:0.6.1+build.+"
    modApi "net.fabricmc.fabric-api:fabric-api:0.3.2+build.+"

    modImplementation("me.shedaniel.cloth:config-2:1.1.2") {
        force = true
    }

    modImplementation "io.github.prospector:modmenu:1.7.12+build.122"
    modImplementation "com.github.Chocohead:Fabric-ASM:1898883c7f"
    modImplementation "io.github.cottonmc:cotton-client-commands:0.4.2+1.14.3-SNAPSHOT"
    modImplementation "stevekung.mods.stevekungslib:SteveKunG's-Lib:19w37a-1.0.0-dev"
}

curseforge {
    apiKey = project.indicatia_api
    project {
        id = "272146"
        changelog = "Change Log"
        changelogType = "text"
        releaseType = "beta"
        addGameVersion mcVersion

        mainArtifact(jar) {
            displayName = "Indicatia-" + mcVersion + "-" + version
            relations {
                requiredLibrary "stevekungs-lib"
            }
        }
    }
}